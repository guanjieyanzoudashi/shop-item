<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/商城首页.css">
    <style>
        .out{
            width: 600px;
            height: 300px;
            margin: 0 auto;
            background-color: gray;
            position: relative;
            /*top: 100px;*/

        }
        .inside{
            height: 100px;
            width: 300px;
            margin-left: 150px;
            margin-top: 50px;
            position: absolute;
            text-align: center;
            line-height: 50px;

        }
        input{
            width: 300px;



        }
        .login{
            width: 100px;
            margin-top: 20px;
            height: 30px;
            color: forestgreen;
            background-color: lightgoldenrodyellow;
            border-radius: 20px;
            border: 1px;
            cursor: pointer;
            outline:none
        }
        span {
            display:none;
            float:left ;
        }
        .right {
            color: green;
        }
        .error {
            color: red;
        }

    </style>
</head>
<body>
<header class="logo">
    <a href="商城首页.html">
        <img src="img/一淘.png">
    </a>
    <div class="input">
        <input class="search">
        <button class="butt">
            <img src="img/search.png" >
        </button>
        <a href="#" class="app">
            <img src="img/app.png" style="margin-left: 550px">
        </a>
    </div>
    <div class="QR code">
        <img src="//img.alicdn.com/tps/TB1pjAHPXXXXXc_XFXXXXXXXXXX-238-323.png" style="position: absolute;height: 160px;width: 110px;margin-left: 1110px;display: none" class="codeImg" >
    </div>

</header>
<div class="out">
    <div class="inside">
        <input type="text" name="username" placeholder="请输入用户名"><span></span>
        <input type="password" name="password" placeholder="请输入密码">
        <a href="#"><input type="submit" value="注册" class="login"></a>
    </div>
</div>
<footer class="bottom">
    <div class="bottom-dl">
        <dl >
            <dt>关于我们</dt>
            <dd><a href="#">关于一淘</a></dd>
            <dd><a href="#">法律声明</a></dd>
            <dd><a href="#">诚聘人才</a></dd>
            <dd><a href="#">廉政邮箱</a></dd>
        </dl>
        <dl>
            <dt>帮助中心</dt>
            <dd><a href="#">新手指南</a></dd>
            <dd><a href="#">关于返利</a></dd>
            <dd><a href="#">关于集分宝</a></dd>
            <dd><a href="#">关于会员特权</a></dd>
            <dd><a href="#">联系客服</a></dd>
        </dl>
        <dl>
            <dt>手机一淘</dt>
            <dd><a href="#"><img src="//img.alicdn.com/tps/TB1pjAHPXXXXXc_XFXXXXXXXXXX-238-323.png" style="height:162px;width: 119px"></a></dd>
        </dl>
        <dl>
            <dt>优惠地图</dt>
            <dd><a href="#">品牌特卖</a></dd>
            <dd><a href="#">限时闪购</a></dd>
        </dl>
        <dl>
            <dt>商家合作</dt>
            <dd><a href="#">报名入口</a></dd>
            <dd><a href="#">商家端问题</a></dd>
        </dl>
    </div>
    <div class="link-list">
        <p class="link-list-p">
            <a href="#">阿里巴巴集团</a>
            <a href="#">淘宝网</a>
            <a href="#">天猫</a>
            <a href="#">聚划算</a>
            <a href="#">全球速卖通</a>
            <a href="#">阿里巴巴国际交易市场</a>
            <a href="#">1688</a>
            <a href="#">阿里妈妈</a>
            <a href="#">阿里旅行·去啊</a>
            <a href="#">万网</a>
            <a href="#">高德</a>
            <a href="#">优视</a>
            <a href="#">友盟</a>
            <a href="#">酷盘</a>
            <a href="#">虾米</a>
            <a href="#">天天动听</a>
            <a href="#">来往</a>
            <a href="#">钉钉</a>
            <a href="#">11 Main</a>
            <a href="#">支付宝</a>
        </p>
        <p class="link-list-copyright">
            Copyright © 2010-2017 ETAO.COM 版权所有
            增值电信业务经营许可证：浙B2-20080224
        </p>
    </div>
</footer>
</body>
<script src="js/myajax.js" charset="utf-8"></script>
<script>
    var oUsername = document.querySelector('input[name=username]');
    var oPassword = document.querySelector('input[name=password]');
    var oSubmit = document.querySelector('input[type=submit]');

    oSubmit.onclick = function(){
        //先进行js校验用户名和密码符合规范，js校验通过
        //请求ajax进行校验用户名是否可用,当这个校验通过才能请求注册接口

        myajax.post('http://h6.duchengjiu.top/shop/api_user.php',
            {
                status: 'register',
                username: oUsername.value,
                password: oPassword.value
            }, function(err, responseText){
                var json = JSON.parse(responseText);
                if(json.message==="注册成功"){
//                    alert("注册成功");
                    location.href="商城首页.html";
                }
                console.log(json);
            });
    };
//    var oInput = document.querySelector('input');
    var oSpan = document.querySelector('span');
    oUsername.onblur = function() {
        myajax.post('http://h6.duchengjiu.top/shop/api_user.php',
            {status: 'check', username: oUsername.value},
            function(error, responseText) {
                var json = JSON.parse(responseText);
                oSpan.innerText = json.message;
                oSpan.style.display = 'block';
                if (json.code === 0) {
                    oSpan.className = "right";
                } else {
                    oSpan.className = "error";
                }

            });

    }
</script>
</html>